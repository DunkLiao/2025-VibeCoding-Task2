<!DOCTYPE html>
<html lang="zh-Hant">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>äººç‹—æ›ç®—æ­²æ•¸å™¨ â€” è²¼åœ–æ‰‹ç¹ªé¢¨</title>

  <!-- æ‰‹å¯«é¢¨å­—å‹ (Google Fonts) -->
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #fff6f9;
      --card: #fff;
      --accent: #ff7aa2;
      --accent-2: #ffd6e6;
      --text: #2b2b2b;
      --muted: #6b6b6b;
      --shadow: 0 8px 30px rgba(43, 27, 40, 0.08);
      --radius: 16px;
    }

    * {
      box-sizing: border-box
    }

    html,
    body {
      height: 100%
    }

    body {
      margin: 0;
      font-family: "Helvetica Neue", Arial, sans-serif;
      background: linear-gradient(180deg, #fff6f9 0%, #fff9fb 100%);
      color: var(--text);
      display: flex;
      align-items: flex-start;
      justify-content: center;
      padding: 20px 16px 40px;
    }

    /* ä¸»å®¹å™¨ - å‚ç›´å–®æ¬„å¸ƒå±€ */
    .wrap {
      width: 100%;
      max-width: 540px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    @media (max-width: 768px) {
      body {
        padding: 16px 12px 30px;
      }

      .wrap {
        gap: 16px;
      }
    }

    /* è¼¸å…¥èˆ‡çµæœå¡ç‰‡ */
    .panel {
      background: var(--card);
      border-radius: 12px;
      padding: 14px;
      box-shadow: var(--shadow);
      position: relative;
      overflow: visible;
      width: 100%;
    }

    h1 {
      font-family: "Patrick Hand", "Helvetica Neue", Arial, sans-serif;
      font-size: 22px;
      margin: 4px 0 10px;
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    @media (max-width: 480px) {
      h1 {
        font-size: 18px;
      }
    }

    .subtitle {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 10px;
    }

    label {
      font-weight: 600;
      font-size: 13px;
      display: block;
      margin-bottom: 5px;
      margin-top: 8px;
    }

    input[type="date"],
    select {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px dashed #ffd6e6;
      background: linear-gradient(180deg, #fff, #fff9fb);
      font-size: 15px;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
    }

    /* ç‚º select æ·»åŠ è‡ªå®šç¾©ç®­é ­ */
    select {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8'%3E%3Cpath fill='%23ff7aa2' d='M0 0l6 8 6-8z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      padding-right: 36px;
    }

    .controls {
      margin-top: 10px
    }

    button.calc {
      margin-top: 10px;
      width: 100%;
      padding: 11px;
      border-radius: 10px;
      border: none;
      font-weight: 700;
      font-size: 15px;
      background: linear-gradient(180deg, var(--accent), #ff5b8a);
      color: white;
      cursor: pointer;
      box-shadow: 0 8px 18px rgba(255, 122, 162, 0.18);
      transition: transform .18s ease, box-shadow .18s ease;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }

    /* hover å’Œ active æ•ˆæœ */
    button.calc:hover {
      transform: scale(1.04);
      box-shadow: 0 14px 30px rgba(255, 122, 162, 0.22);
    }

    button.calc:active {
      transform: scale(0.98);
      box-shadow: 0 4px 12px rgba(255, 122, 162, 0.15);
    }

    /* ç§»é™¤è¡Œå‹•è£ç½®ä¸Šçš„ hover æ•ˆæœ */
    @media (hover: none) {
      button.calc:hover {
        transform: none;
        box-shadow: 0 8px 18px rgba(255, 122, 162, 0.18);
      }
    }

    .result-box {
      margin-top: 14px;
      background: linear-gradient(180deg, #fff, #fff7fb);
      border-radius: 10px;
      padding: 12px;
      border: 1px solid rgba(255, 185, 210, 0.4);
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .result-text {
      font-size: 14px;
      line-height: 1.4;
    }

    .result-key {
      font-size: 18px;
      font-weight: 800;
      color: #e83b7b;
    }

    /* æ’ç•« + èªªæ˜å¡å€åŸŸ */
    .art-panel {
      display: flex;
      flex-direction: column;
      gap: 14px;
      width: 100%;
    }

    .sticker {
      background: linear-gradient(180deg, #fff, #fffaf2);
      border-radius: 14px;
      padding: 14px;
      box-shadow: var(--shadow);
      display: flex;
      gap: 10px;
      align-items: center;
    }

    @media (max-width: 640px) {
      .sticker {
        padding: 12px;
      }
    }

    /* æ‰‹ç¹ªç‹—ç‹—æ’ç•«å€ */
    .dog-wrap {
      width: 110px;
      height: 110px;
      position: relative;
      flex: 0 0 110px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* æ’ç•«ï¼šSVG å®¹å™¨ */
    .dog-svg {
      width: 95px;
      height: 95px;
      transform-origin: center bottom;
      position: relative;
    }

    /* æ‘‡å°¾å·´å‹•ç•« (B) */
    @keyframes wag {
      0% {
        transform: rotate(6deg);
      }

      25% {
        transform: rotate(-12deg);
      }

      50% {
        transform: rotate(8deg);
      }

      75% {
        transform: rotate(-8deg);
      }

      100% {
        transform: rotate(6deg);
      }
    }

    .tail {
      transform-origin: 8px 8px;
      animation: wag 1s ease-in-out infinite;
    }

    /* çœ¨çœ¼å‹•ç•« (B) */
    @keyframes blink {

      0%,
      80%,
      100% {
        transform: scaleY(1);
      }

      85% {
        transform: scaleY(0.12);
      }

      87% {
        transform: scaleY(1);
      }
    }

    .eye {
      transform-origin: center;
      animation: blink 4.5s infinite;
    }

    /* æ’ç•«æ–‡å­—å¡ */
    .info-card {
      padding: 10px;
      background: linear-gradient(180deg, #fff, #fff7fb);
      border-radius: 10px;
      border: 1px solid rgba(0, 0, 0, 0.04);
      font-size: 13px;
      color: var(--muted);
      line-height: 1.5;
    }

    .card {
      display: flex;
      gap: 8px;
      align-items: center;
      margin-bottom: 8px;
    }

    .card svg {
      flex: 0 0 50px;
      width: 50px;
      height: 50px;
    }

    .calculator-box {
      position: relative;
      z-index: 20;
    }

    /* è¡¨æ ¼æ¨£å¼å„ªåŒ– */
    table td {
      border-bottom: 1px dashed #f3dbe4;
      padding: 8px 6px;
      text-align: center;
    }

    /* è³‡æ–™ä¾†æºé€£çµå„ªåŒ– */
    a {
      color: var(--accent);
      text-decoration: none;
      transition: color 0.2s ease;
    }

    a:hover {
      color: #ff5b8a;
      text-decoration: underline;
    }


    /* å¹³æ¿å°ºå¯¸å„ªåŒ– */
    @media (max-width: 768px) and (min-width: 561px) {
      .wrap {
        max-width: 520px;
      }
    }

    /* éŸ¿æ‡‰å¼è¨­è¨ˆ - å°è¢å¹• */
    @media (max-width: 560px) {
      .wrap {
        max-width: 100%;
      }

      .panel {
        padding: 14px;
      }

      .sticker {
        padding: 14px;
        flex-direction: column;
        align-items: center;
        text-align: center;
      }

      .dog-wrap {
        width: 85px;
        height: 85px;
      }

      .dog-svg {
        width: 75px;
        height: 75px;
      }

      .result-box {
        flex-direction: column;
        text-align: center;
      }

      .info-card {
        font-size: 13px;
        padding: 12px;
      }
    }

    /* å°å‹æ‰‹æ©Ÿå„ªåŒ– */
    @media (max-width: 480px) {
      body {
        padding: 12px 8px 24px;
      }

      .panel {
        padding: 12px;
        border-radius: 12px;
      }

      h1 {
        font-size: 17px;
        gap: 5px;
      }

      .subtitle {
        font-size: 11px;
      }

      label {
        font-size: 12px;
        margin-bottom: 4px;
      }

      input[type="date"],
      select {
        padding: 9px;
        font-size: 13px;
      }

      button.calc {
        padding: 10px;
        font-size: 14px;
      }

      .result-text {
        font-size: 13px;
      }

      .result-key {
        font-size: 16px;
      }

      .card {
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 6px;
      }

      .card svg {
        flex: 0 0 auto;
        width: 42px;
        height: 42px;
      }

      /* è¡¨æ ¼å°è¢å¹•å„ªåŒ– */
      table {
        font-size: 11px !important;
        min-width: 450px !important;
      }

      table th,
      table td {
        padding: 6px 4px !important;
      }

      table th p {
        font-size: 10px;
      }
    }

    /* è¶…å°è¢å¹•å„ªåŒ– (iPhone SEç­‰) */
    @media (max-width: 375px) {
      body {
        padding: 10px 6px 20px;
      }

      h1 {
        font-size: 15px;
      }

      .panel,
      .sticker {
        padding: 8px;
      }

      .wrap {
        gap: 10px;
      }

      table {
        font-size: 10px !important;
        min-width: 380px !important;
      }

      table th,
      table td {
        padding: 5px 3px !important;
      }

      table th p {
        font-size: 9px;
      }

      /* æ›´ç·Šæ¹Šçš„æ¨™é¡Œå’Œæ–‡å­— */
      .info-card {
        padding: 8px !important;
      }
    }
  </style>
</head>

<body>

  <div class="calculator-box " role="main" aria-label="äººç‹—æ›ç®—æ­²æ•¸å™¨">
    <!-- å·¦ï¼šè¼¸å…¥ã€çµæœ -->
    <section class="panel" aria-labelledby="appTitle">
      <h1 id="appTitle">ğŸ¶ äººç‹—æ›ç®—æ­²æ•¸å™¨ï¼ˆè²¼åœ–æ‰‹ç¹ªé¢¨ï¼‰</h1>
      <div class="subtitle">è¼¸å…¥å‡ºç”Ÿæ—¥æœŸ â†’ æœƒé¡¯ç¤ºç‹—å¹´é½¡ï¼ˆä¾é«”å‹ï¼‰èˆ‡æ›ç®—æˆäººé¡å¹´é½¡</div>

      <label for="birth">ç‹—ç‹—çš„å‡ºç”Ÿæ—¥æœŸ</label>
      <input id="birth" type="date" max="" aria-describedby="birthDesc" />

      <label for="size">ç‹—ç‹—é«”å‹</label>
      <select id="size" aria-label="é¸æ“‡ç‹—ç‹—é«”å‹">
        <option value="small">å°å‹çŠ¬ï¼ˆ9kg ä»¥ä¸‹ï¼‰</option>
        <option value="medium">ä¸­å‹çŠ¬ï¼ˆ9â€“23kgï¼‰</option>
        <option value="large">å¤§å‹çŠ¬ï¼ˆ23â€“45kgï¼‰</option>
        <option value="giant">å·¨å‹çŠ¬ï¼ˆ45kg ä»¥ä¸Šï¼‰</option>
      </select>

      <div class="controls">
        <button class="calc" id="calcBtn" aria-label="é–‹å§‹è¨ˆç®—">é–‹å§‹è¨ˆç®—</button>
        <button class="calc" id="clearMemoryBtn"
          style="margin-top:8px;background:linear-gradient(180deg,#ffd6e6,#fff);color:#e83b7b;border:1px solid #ffd6e6;"
          aria-label="æ¸…é™¤è¨˜æ†¶">æ¸…é™¤è¨˜æ†¶</button>
      </div>

      <div id="output" class="result-box" style="display:none;" aria-live="polite">
        <div style="flex:1">
          <div class="result-text">
            ç‹—ç‹—ï¼ˆ<span id="showSizeLabel">-</span>ï¼‰ç¾åœ¨å¤§ç´„ <span class="result-key" id="dogYears">-</span> æ­²ï¼ˆç‹—å¹´é½¡ï¼‰<br>
            æ›ç®—æˆäººé¡å¹´é½¡å¤§ç´„æ˜¯ <span class="result-key" id="humanYears">-</span> æ­²
          </div>
        </div>

        <!-- å°å‹è²¼ç´™æ’ç•«ï¼ˆåŒæ­¥å‹•ç•«ï¼‰ -->
        <div style="width:120px;display:flex;align-items:center;justify-content:center">
          <div
            style="width:86px;height:86px;border-radius:12px;background:linear-gradient(180deg,#fff,#fff9fb);display:flex;align-items:center;justify-content:center;border:1px dashed #ffd6e6;">
            <!-- ç°¡å–® SVG ç‹—ç‹— (å°¾å·´èˆ‡çœ¼ç›æœƒå‹•ç•«) -->
            <svg class="dog-svg" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"
              focusable="false">
              <!-- body -->
              <ellipse cx="60" cy="70" rx="38" ry="26" fill="#fff" stroke="#2b2b2b" stroke-width="2" />
              <!-- ear -->
              <path d="M36 48 C28 44, 26 32, 38 30 C50 28, 44 46, 36 48 Z" fill="#ffd6e6" stroke="#2b2b2b"
                stroke-width="1.6" />
              <path d="M84 48 C92 44, 94 32, 82 30 C70 28, 76 46, 84 48 Z" fill="#ffd6e6" stroke="#2b2b2b"
                stroke-width="1.6" />

              <!-- head -->
              <circle cx="60" cy="44" r="24" fill="#fff" stroke="#2b2b2b" stroke-width="2" />
              <!-- eye left -->
              <ellipse class="eye" cx="52" cy="42" rx="3.8" ry="4.8" fill="#2b2b2b" />
              <!-- eye right -->
              <ellipse class="eye" cx="68" cy="42" rx="3.8" ry="4.8" fill="#2b2b2b" />
              <!-- nose -->
              <ellipse cx="60" cy="50" rx="4.8" ry="3.4" fill="#2b2b2b" />
              <!-- mouth -->
              <path d="M56 54 Q60 58 64 54" stroke="#2b2b2b" stroke-width="1.6" fill="none" stroke-linecap="round" />
              <!-- tail (separate group for animation) -->
              <g transform="translate(98,64) rotate(6)" class="tail">
                <path d="M0 0 C8 -4, 12 -12, 6 -18" stroke="#2b2b2b" stroke-width="3" fill="none"
                  stroke-linecap="round" />
                <path d="M2 -2 C10 -6, 14 -14, 8 -20" stroke="#ff5b8a" stroke-width="3" fill="none"
                  stroke-linecap="round" opacity="0.6" />
              </g>
            </svg>
          </div>
        </div>
      </div>

      <div style="margin-top:10px" class="info-card">
        å°æç¤ºï¼šå»ºè­°è¼¸å…¥ **æº–ç¢ºå‡ºç”Ÿæ—¥æœŸ**ï¼Œçµæœæœƒä»¥ä»Šå¤©æ—¥æœŸä½œç‚ºè¨ˆç®—åŸºç¤ä¸¦ç”¨è¡¨æ ¼è³‡æ–™é€²è¡Œæ›ç®—ï¼ˆè‹¥ç‚ºéæ•´æ­²ï¼Œæœƒä»¥ç›¸é„°è¡¨æ ¼é»åšç·šæ€§æ’å€¼ï¼‰ã€‚
      </div>
    </section>

    <!-- å³å´ï¼šå¤§æ’ç•« + å¡ç‰‡ -->
    <aside class="art-panel">
      <div class="sticker" aria-hidden="true">
        <div class="dog-wrap">
          <!-- å¤§æ‰‹ç¹ªè²¼åœ–é¢¨ç‹—ç‹—ï¼ˆå‹•ç•«ï¼šçœ¨çœ¼ + æ–å°¾å·´ï¼‰ -->
          <svg class="dog-svg" viewBox="0 0 160 160" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="å¯æ„›ç‹—ç‹—æ’ç•«">
            <!-- shadow -->
            <ellipse cx="80" cy="140" rx="44" ry="8" fill="#ffd6e6" opacity="0.35" />
            <!-- body -->
            <ellipse cx="80" cy="100" rx="54" ry="36" fill="#fff" stroke="#2b2b2b" stroke-width="3" />
            <!-- head -->
            <circle cx="80" cy="58" r="36" fill="#fff" stroke="#2b2b2b" stroke-width="3" />
            <!-- ears -->
            <path d="M50 46 C38 36, 34 28, 48 22 C58 18, 64 38, 50 46 Z" fill="#ffd6e6" stroke="#2b2b2b"
              stroke-width="2" />
            <path d="M110 46 C122 36, 126 28, 112 22 C102 18, 96 38, 110 46 Z" fill="#ffd6e6" stroke="#2b2b2b"
              stroke-width="2" />

            <!-- eyes (blink) -->
            <g transform="translate(0,0)">
              <ellipse class="eye" cx="70" cy="60" rx="5.2" ry="6.4" fill="#2b2b2b" />
              <ellipse class="eye" cx="90" cy="60" rx="5.2" ry="6.4" fill="#2b2b2b" />
            </g>

            <!-- nose & mouth -->
            <ellipse cx="80" cy="72" rx="5.5" ry="4.2" fill="#2b2b2b" />
            <path d="M76 78 Q80 84 84 78" stroke="#2b2b2b" stroke-width="1.8" fill="none" stroke-linecap="round" />

            <!-- tail group -->
            <g transform="translate(140,98) rotate(8)" class="tail">
              <path d="M0 0 C10 -6, 16 -18, 8 -26" stroke="#2b2b2b" stroke-width="4" fill="none"
                stroke-linecap="round" />
              <path d="M4 -4 C14 -10, 20 -22, 12 -30" stroke="#ff5b8a" stroke-width="3.2" fill="none"
                stroke-linecap="round" opacity="0.7" />
            </g>

            <!-- blush -->
            <ellipse cx="60" cy="74" rx="8" ry="5.2" fill="#ffd6e6" opacity="0.9" />
            <ellipse cx="100" cy="74" rx="8" ry="5.2" fill="#ffd6e6" opacity="0.9" />

            <!-- little scarf -->
            <path d="M80 86 C66 94, 58 94, 52 92 C50 96, 68 106, 86 98 L80 86 Z" fill="#ff5b8a" stroke="#2b2b2b"
              stroke-width="1.6" />
          </svg>
        </div>

        <div style="flex:1">
          <div style="font-family: 'Patrick Hand'; font-size:16px; color:#7b1d3e; margin-bottom:5px;">Helloï¼æˆ‘æ˜¯è²¼åœ–ç‹—ç‹—</div>
          <div style="color:var(--muted); font-size:13px; line-height:1.5">
            ä¾†è©¦è©¦çœ‹æŠŠä½ çš„ç‹—ç‹—å¹´é½¡æ›ç®—æˆäººé¡å¹´é½¡å§ï¼æˆ‘æœƒæ–å°¾å·´ã€çœ¨çœ¼ï¼Œé‚„æœƒç”¨æˆ‘å€‘çš„æ›ç®—è¡¨å¹«ä½ ç²¾æº–æ›ç®—ï¼ˆæœ‰æ’å€¼ï¼‰ã€‚
          </div>
        </div>
      </div>

      <!-- è©³ç´°æ›ç®—è¡¨ -->
      <div class="info-card" style="padding:14px;background:#fff;box-shadow:var(--shadow)">
        <div
          style="display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;flex-wrap:wrap;gap:6px">
          <div style="font-weight:800;color:#7b1d3e;font-size:14px">è©³ç´°æ›ç®—è¡¨</div>
          <div style="font-size:11px;color:var(--muted)">è³‡æ–™ä¾†æºï¼š<a href='https://hehopets.com/age-conversion'
              target='about:blank'>@çŠ¬è²“å¹´é½¡æ›ç®—@</a><a href='https://pets.edh.tw/blog/dog-age-conversion-guide'
              target='about:blank'>@æ—©å®‰æ¯›å¥åº·@</a></div>
        </div>

        <div style="overflow-x:auto;-webkit-overflow-scrolling:touch">
          <table style="border-collapse:collapse;width:100%;font-size:12px;min-width:480px" aria-label="æ›ç®—è¡¨">
            <thead>
              <tr>
                <th
                  style="border-bottom:1px dashed #f3dbe4;padding:7px 5px;text-align:center;font-weight:700;color:#7b1d3e;background:linear-gradient(90deg,#fff7fb,#fff0f7);border-radius:6px">
                  ç‹—ç‹—å¹´é½¡</th>
                <th
                  style="border-bottom:1px dashed #f3dbe4;padding:7px 5px;text-align:center;font-weight:700;color:#7b1d3e;background:linear-gradient(90deg,#fff7fb,#fff0f7);border-radius:6px">
                  <p style="margin:0;font-size:11px"><b>å°å‹çŠ¬ï¼ˆ9kg ä»¥ä¸‹ï¼‰</b></p>æ›ç®—è‡³äººé¡å¹´é½¡
                </th>
                <th
                  style="border-bottom:1px dashed #f3dbe4;padding:7px 5px;text-align:center;font-weight:700;color:#7b1d3e;background:linear-gradient(90deg,#fff7fb,#fff0f7);border-radius:6px">
                  <p style="margin:0;font-size:11px"><b>ä¸­å‹çŠ¬ï¼ˆ9â€“23kgï¼‰</b></p>æ›ç®—è‡³äººé¡å¹´é½¡
                </th>
                <th
                  style="border-bottom:1px dashed #f3dbe4;padding:7px 5px;text-align:center;font-weight:700;color:#7b1d3e;background:linear-gradient(90deg,#fff7fb,#fff0f7);border-radius:6px">
                  <p style="margin:0;font-size:11px"><b>å¤§å‹çŠ¬ï¼ˆ23â€“45kgï¼‰</b></p>æ›ç®—è‡³äººé¡å¹´é½¡
                </th>
                <th
                  style="border-bottom:1px dashed #f3dbe4;padding:7px 5px;text-align:center;font-weight:700;color:#7b1d3e;background:linear-gradient(90deg,#fff7fb,#fff0f7);border-radius:6px">
                  <p style="margin:0;font-size:11px"><b>å·¨å‹çŠ¬ï¼ˆ45kg ä»¥ä¸Šï¼‰</b></p>æ›ç®—è‡³äººé¡å¹´é½¡
                </th>
              </tr>
            </thead>
            <tbody id="dataTableBody">
              <!-- JS æœƒå¡«å…¥è¡¨æ ¼åˆ— -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- æ›ç®—å…¬å¼èªªæ˜ -->
      <div class="info-card" style="padding:14px;background:#fff;box-shadow:var(--shadow)">
        <div style="font-weight:800;color:#7b1d3e;margin-bottom:10px;font-size:14px">æ›ç®—å…¬å¼èªªæ˜ï¼ˆè¡¨æ ¼ + åœ–æ–‡ï¼‰</div>

        <div class="card">
          <svg width="58" height="58" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <circle cx="32" cy="32" r="30" fill="#fff" stroke="#2b2b2b" stroke-width="1.8" />
            <path d="M18 36 Q32 46 46 36" stroke="#ff5b8a" stroke-width="2.4" fill="none" stroke-linecap="round" />
            <circle cx="24" cy="28" r="3.2" fill="#2b2b2b" />
            <circle cx="40" cy="28" r="3.2" fill="#2b2b2b" />
          </svg>
          <div>
            <div style="font-weight:700;font-size:13px">æ›ç®—æ€è·¯</div>
            <div style="color:var(--muted);font-size:12px">ä½¿ç”¨ä½ æä¾›çš„å¹´é½¡è¡¨ï¼ˆCSVï¼‰ã€‚è‹¥è¨ˆç®—åˆ°çš„ç‹—å¹´é½¡ä»‹æ–¼å…©å€‹è¡¨æ ¼é»ä¹‹é–“ï¼Œæœƒä»¥ <strong>ç·šæ€§æ’å€¼</strong>
              ä¼°ç®—å°æ‡‰çš„äººé¡å¹´é½¡ã€‚</div>
          </div>
        </div>

        <div class="card">
          <svg width="58" height="58" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect x="6" y="10" width="52" height="44" rx="6" fill="#fff" stroke="#2b2b2b" stroke-width="1.6" />
            <text x="14" y="28" font-size="10" fill="#7b1d3e" font-weight="700">è‹¥ dogY åœ¨</text>
            <text x="14" y="40" font-size="10" fill="#6b6b6b">pointA..pointB â†’ interpolate</text>
          </svg>
          <div>
            <div style="font-weight:700;font-size:13px">å…¬å¼ï¼ˆç°¡åŒ–ï¼‰</div>
            <div style="color:var(--muted);font-size:12px">
              è‹¥ <em>dogY</em> åœ¨ <em>A</em>ï¼ˆäººé½¡ = HAï¼‰èˆ‡ <em>B</em>ï¼ˆäººé½¡ = HBï¼‰ä¹‹é–“ï¼š<br>
              <code>human â‰ˆ HA + (HB-HA) * (dogY - A) / (B - A)</code>
            </div>
          </div>
        </div>

        <div style="font-size:12px;color:var(--muted);margin-top:6px">
          è¡¨æ ¼åŒ…å«ï¼š1ã€2ã€3ã€5ã€7ã€10ã€12ã€15 æ­²å°æ‡‰çš„äººé¡å¹´é½¡ã€‚
        </div>
      </div>

      <div class="info-card" style="font-size:13px">
        <strong style="display:block; margin-bottom:6px;">åŠŸèƒ½ç‰¹è‰²</strong>
        â€¢ æ‰‹ç¹ªè²¼åœ–é¢¨ UIï¼ˆLINE è²¼åœ–æ„Ÿï¼‰<br>
        â€¢ è©³ç´°æ›ç®—è¡¨èˆ‡å…¬å¼èªªæ˜<br>
        â€¢ ç‹—ç‹—æœƒçœ¨çœ¼èˆ‡æ–å°¾å·´å‹•ç•«ï¼ˆæŒçºŒæ’­æ”¾ï¼‰<br>
        â€¢ æŒ‰éˆ•æœ‰å¾®æ”¾å¤§äº’å‹•
      </div>
    </aside>
  </div>

  <script>
    // ---- 1. CSV è³‡æ–™ï¼ˆä¾†è‡ªä¸Šå‚³çš„ table.csvï¼‰ ----
    // ç‚ºäº†æ–¹ä¾¿å‰ç«¯ä½¿ç”¨ï¼Œæˆ‘æŠŠ CSV è§£æå¾Œçš„è³‡æ–™å¯«æˆä¸‹é¢çš„çµæ§‹ï¼ˆæ•¸å­—ï¼‰
    // è³‡æ–™ä¾†æºï¼ˆCSVï¼‰:
    const agePoints = [
      { dog: 1, small: 15, medium: 15, large: 15, giant: 12 },
      { dog: 2, small: 24, medium: 24, large: 24, giant: 22 },
      { dog: 3, small: 28, medium: 28, large: 28, giant: 31 },
      { dog: 5, small: 36, medium: 36, large: 36, giant: 45 },
      { dog: 7, small: 44, medium: 47, large: 50, giant: 56 },
      { dog: 10, small: 56, medium: 60, large: 66, giant: 79 },
      { dog: 12, small: 64, medium: 69, large: 77, giant: 93 },
      { dog: 15, small: 76, medium: 83, large: 93, giant: 114 }
    ];

    // å°‡è¡¨æ ¼å…§å®¹å¡«å…¥ footer çš„ table body
    (function fillTable() {
      const tbody = document.getElementById('dataTableBody');
      tbody.innerHTML = '';
      agePoints.forEach(pt => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${pt.dog} æ­²</td>
          <td>${pt.small} æ­²</td>
          <td>${pt.medium} æ­²</td>
          <td>${pt.large} æ­²</td>
          <td>${pt.giant} æ­²</td>
        `;
        tbody.appendChild(tr);
      });
    })();

    // è¨ˆç®—ä»Šå¤©ç‚º max date
    (function setMaxDate() {
      const d = new Date();
      const yyyy = d.getFullYear();
      const mm = String(d.getMonth() + 1).padStart(2, '0');
      const dd = String(d.getDate()).padStart(2, '0');
      document.getElementById('birth').max = `${yyyy}-${mm}-${dd}`;
    })();

    // é¸å–® label é¡¯ç¤º
    const sizeLabelMap = {
      small: "å°å‹çŠ¬ï¼ˆ9kg ä»¥ä¸‹ï¼‰",
      medium: "ä¸­å‹çŠ¬ï¼ˆ9â€“23kgï¼‰",
      large: "å¤§å‹çŠ¬ï¼ˆ23â€“45kgï¼‰",
      giant: "å·¨å‹çŠ¬ï¼ˆ45kg ä»¥ä¸Šï¼‰"
    };

    // ç·šæ€§æ’å€¼å‡½å¼ï¼šæ‰¾é›¢æ•£é»ä¸­æœ€æ¥è¿‘çš„ä¸‹ç•Œèˆ‡ä¸Šç•Œå¾Œåšæ’å€¼
    function humanAgeFromDogYears(dogYears, sizeKey) {
      // ç¯„åœè€ƒé‡ï¼šè‹¥å°æ–¼æœ€å°é»ï¼Œç”¨æœ€å°é»å€¼ï¼›è‹¥å¤§æ–¼æœ€å¤§é»ï¼Œç”¨æœ€å¤§é»å€¼
      if (dogYears <= agePoints[0].dog) return agePoints[0][sizeKey];
      const last = agePoints[agePoints.length - 1];
      if (dogYears >= last.dog) return last[sizeKey];

      // æ‰¾åˆ° A <= dogYears <= B
      for (let i = 0; i < agePoints.length - 1; i++) {
        const A = agePoints[i].dog, B = agePoints[i + 1].dog;
        if (dogYears >= A && dogYears <= B) {
          const HA = agePoints[i][sizeKey];
          const HB = agePoints[i + 1][sizeKey];
          // è‹¥æ°å¥½ç­‰æ–¼ Aï¼Œå›å‚³ HA
          if (dogYears === A) return HA;
          // ç·šæ€§æ’å€¼
          const t = (dogYears - A) / (B - A);
          const interpolated = HA + (HB - HA) * t;
          return Math.round(interpolated * 10) / 10; // ä¸€ä½å°æ•¸
        }
      }
      // fallback
      return last[sizeKey];
    }

    // è¨ˆç®—ç‹—å¹´é½¡ï¼ˆä»¥å¹´ç‚ºå–®ä½ï¼Œä¿ç•™ä¸€ä½å°æ•¸ï¼‰
    function calcDogYearsFromBirth(birthDateStr) {
      const birth = new Date(birthDateStr + 'T00:00:00');
      const now = new Date();
      if (isNaN(birth)) return null;
      const diffMs = now - birth;
      const years = diffMs / (1000 * 60 * 60 * 24 * 365.2425); // å¹³å‡å¤©æ•¸ï¼ˆè€ƒæ…®é–å¹´ï¼‰
      return Math.round(years * 10) / 10;
    }

    // localStorage key
    const STORAGE_KEY = 'DogToHumanAgeResult';

    // é¡¯ç¤ºçµæœå‡½å¼
    function showResult(dogY, humanY, size) {
      document.getElementById('dogYears').textContent = dogY;
      document.getElementById('humanYears').textContent = humanY;
      document.getElementById('showSizeLabel').textContent = sizeLabelMap[size];
      document.getElementById('output').style.display = 'flex';
      const out = document.getElementById('output');
      out.style.opacity = 0;
      out.animate([{ opacity: 0, transform: 'translateY(10px)' }, { opacity: 1, transform: 'translateY(0)' }], { duration: 300, easing: 'ease-out', fill: 'forwards' });
    }

    // è®€å– localStorage ä¸¦é¡¯ç¤º
    function loadMemory() {
      const data = localStorage.getItem(STORAGE_KEY);
      if (data) {
        try {
          const obj = JSON.parse(data);
          showResult(obj.dogY, obj.humanY, obj.size);
        } catch (e) { localStorage.removeItem(STORAGE_KEY); }
      }
    }

    // è¨ˆç®—æŒ‰éˆ•
    const btn = document.getElementById('calcBtn');
    btn.addEventListener('click', () => {
      const birth = document.getElementById('birth').value;
      const size = document.getElementById('size').value;
      if (!birth) {
        alert('è«‹å…ˆè¼¸å…¥ç‹—ç‹—çš„å‡ºç”Ÿæ—¥æœŸ ğŸ˜Š');
        return;
      }
      const dogY = calcDogYearsFromBirth(birth);
      const humanY = humanAgeFromDogYears(dogY, size);
      showResult(dogY, humanY, size);
      // å„²å­˜åˆ° localStorage
      localStorage.setItem(STORAGE_KEY, JSON.stringify({ dogY, humanY, size }));
    });

    // æ¸…é™¤è¨˜æ†¶æŒ‰éˆ•
    document.getElementById('clearMemoryBtn').addEventListener('click', () => {
      localStorage.removeItem(STORAGE_KEY);
      document.getElementById('output').style.display = 'none';
    });

    // è¼‰å…¥æ™‚è‡ªå‹•è®€å–è¨˜æ†¶
    window.addEventListener('DOMContentLoaded', loadMemory);

    // Accessibility: allow Enter key to trigger calculation when focus on date/select
    document.getElementById('birth').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') btn.click();
    });
    document.getElementById('size').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') btn.click();
    });
  </script>
</body>

</html>